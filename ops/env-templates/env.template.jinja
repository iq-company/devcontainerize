# This is a template for the environment file.
# It combines settings for Docker Compose parsing and for the container runtime.
# Placeholders like {% raw %}{{random_lower}}{% endraw %} are replaced by init_env_files script.

# --- Docker Image & Project Settings (for host machine) ---
IQ_IMAGE={{ image_prefix }}-dev
IQ_IMAGE_TAG=latest
COMPOSE_PROJECT_NAME={% raw %}{{random_lower}}{% endraw %}_{{ project_slug }}_{% raw %}{{stage}}{% endraw %}
VSCODE_SETTINGS_PATH={% raw %}{{vscode_settings_path}}{% endraw %}

# --- Host User IDs (for container permissions) ---
HOST_UID={% raw %}{{uid}}{% endraw %}
HOST_GID={% raw %}{{gid}}{% endraw %}

# --- Frappe Site and Database Details ---
IQ_SITE_NAME={{ site_name }}
IQ_ADMIN_PW={% raw %}{{random_password}}{% endraw %}

# --- Database Settings ---

DBMS={% raw %}{{dbms}}{% endraw %}

# Super-user for DDL operations (but not root).
# Used when the 'with-ddl' profile is active.
DB_SUPER_USER={% raw %}{{db_super_user}}{% endraw %}
DB_SUPER_USER_PW={% raw %}{{db_super_user_pw}}{% endraw %}

# The root password for the main database user.
DB_ROOT_PASSWORD={% raw %}{{db_root_password}}{% endraw %}

# The database user for the Frappe application itself.
# Can be empty if 'with-ddl' is used, the container will then use the super-user.
DB_USER={{ project_slug }}_{% raw %}{{stage}}{% endraw %}_user
DB_PASSWORD={% raw %}{{db_password}}{% endraw %}

# The name of the database.
DB_NAME={{ project_slug }}_{% raw %}{{stage}}{% endraw %}_user

# --- Docker Compose Generic DB Settings (interpolated by script) ---
DB_HOST={% raw %}{{db_host}}{% endraw %}
DB_PORT={% raw %}{{db_port}}{% endraw %}

# --- Redis and SocketIO Settings ---
REDIS_CACHE=redis-cache:6379
REDIS_QUEUE=redis-queue:6379
SOCKETIO_PORT=9000

# --- General Settings ---
# DYNATRACE_ENABLED=1
SHELL=/bin/bash
LOCAL_DEV_ENV=true
CLIENT_MAX_BODY_SIZE=50m
FRAPPE_STREAM_LOGGING=1

# --- Optional Addons ---
# To enable optional services like OCR or DDL, set their profile names here (e.g., COMPOSE_PROFILES=ocr,ddl)
COMPOSE_PROFILES=ddl

# --- Optional OpenID Connect Settings ---
# OPENID_REALM=iqa
# OPENID_BASE_URL=http://localhost:8081
# OPENID_CLIENT_ID={{ project_slug }}_{% raw %}{{stage}}{% endraw %}
# OPENID_CLIENT_SECRET=YOUR_SECRET_HERE

# --- Exposed Ports (can be changed to avoid conflicts) ---
WEBDB_PORT=22071
NGINX_PORT=8010
