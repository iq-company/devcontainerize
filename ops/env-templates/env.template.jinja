# =============================================================================
# STAGE-SPECIFIC ENVIRONMENT: {% raw %}{{stage}}{% endraw %}
# =============================================================================
# This file contains settings specific to the '{% raw %}{{stage}}{% endraw %}' stage.
# Values here override the shared .env file.
#
# Placeholders like {% raw %}{{random_lower}}{% endraw %} are replaced by init_env_files script.
# =============================================================================

# --- Project Identification (unique per stage) ---
COMPOSE_PROJECT_NAME={% raw %}{{random_lower}}{% endraw %}_{{ project_slug }}_{% raw %}{{stage}}{% endraw %}

# --- Admin Password ---
IQ_ADMIN_PW={% raw %}{{random_password}}{% endraw %}

# --- Database Settings ---
DBMS={% raw %}{{dbms}}{% endraw %}

# Database host and port (service names or external)
DB_HOST={% raw %}{{db_host}}{% endraw %}
DB_PORT={% raw %}{{db_port}}{% endraw %}

# Super-user for DDL operations (not root)
# Used when the 'with-ddl' profile is active
DB_SUPER_USER={% raw %}{{db_super_user}}{% endraw %}
DB_SUPER_USER_PW={% raw %}{{db_super_user_pw}}{% endraw %}

# Root password for the database server
DB_ROOT_PASSWORD={% raw %}{{db_root_password}}{% endraw %}

# Database name
DB_NAME={{ project_slug }}_{% raw %}{{stage}}{% endraw %}_db

# Application database user (must match DB_NAME for pg_site.py compatibility)
DB_USER={{ project_slug }}_{% raw %}{{stage}}{% endraw %}
DB_PASSWORD={% raw %}{{db_password}}{% endraw %}

# --- Optional: Override shared settings ---
# Uncomment to override values from .env for this stage.
# NOTE: IQ_IMAGE overrides work with `bench ops stage run`, but NOT with VSCode devcontainer
# IQ_IMAGE={{ image_prefix }}-release
# IQ_IMAGE_TAG=v1.0.0
# COMPOSE_PROFILES=ocr,monitoring  # Activate optional services for this stage
# WEBDB_PORT=22072
# NGINX_PORT=8011

# --- Optional: OpenID Connect Settings ---
# OPENID_REALM=iqa
# OPENID_BASE_URL=http://localhost:8081
# OPENID_CLIENT_ID={{ project_slug }}_{% raw %}{{stage}}{% endraw %}
# OPENID_CLIENT_SECRET=YOUR_SECRET_HERE
