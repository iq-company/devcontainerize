#!/bin/bash

echo -e '\n\n\n\n\n\n\n'

# Check if keybindings are installed
if python check_iq_keybindings.py >/dev/null 2>&1; then
	# Keybindings are installed
	echo 'The following keyboard shortcuts are available:'
	echo -e '\tF8 - Starts all services, if you stopped some of them in favor of debugging (or if something crashed)'
	echo -e '\tF12 - Switch back to local view (stops all services)'
	echo -e '\tCTRL+F12 - Reload the in-container window'
	echo -e '\tF10 - Run predefined Tasks (create new app, install existing app, ...)'
else
	# Keybindings are not installed
	echo 'Keyboard shortcuts are not installed yet.'
	echo -e '\t	To install them, run: python install_iq_keybindings.py'
fi

echo -e '\n'

# VSCode Dev Containers forwards container port 8000 via forwardPorts
echo -e "{{ project_name }} is now reachable on:"
echo -e "\thttp://localhost:8000/app"
echo -e "\t(initial User: Administrator  PW: ${IQ_ADMIN_PW:-admin})"

echo -e "\nAdditional services:"
echo -e "\t- Documentation: http://localhost:8000/docs"

# Check if webdb profile is active
if [[ "${COMPOSE_PROFILES}" == *"webdb"* ]]; then
	echo -e "\t- Database Manager (webdb): http://localhost:${WEBDB_PORT:-22071}"
else
	echo -e "\t- Database Manager: not started (add 'webdb' to COMPOSE_PROFILES in .env.dev)"
fi

echo -e '\n'
echo -e "ðŸ’¡ Type 'h' for a cheatsheet of common commands"
echo -e '\n'
