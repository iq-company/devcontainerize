_min_copier_version: "9.0"
_templates_suffix: .jinja
_subdirectory: .

# Read `app_name` from calling cwd path
app_name:
  type: str
  default: "{{ copier_answers['_copier_conf']['project_path'] | path.basename }}"

project_name:
  type: str
  default: "My Awesome App Name"
  help: "Human-readable name of your project (used in README, etc.)"

project_slug:
  type: str
  default: "{{ app_name }}"
  help: "Slugified project name (used in docker image names and URLs)"

image_prefix:
  type: str
  default: "{{ project_slug }}"
  help: "Prefix for Docker image names"

default_dbms:
  type: str
  choices:
    - mariadb
    - postgres
    - sqlite
  default: postgres
  help: "Which DBMS should be used by default?"

frappe_version:
  type: str
  default: "version-15"
  help: "Github Branch or Tag of Frappe to use in the images - Use 'develop' for latest version (currently 16)"

author_name:
  type: str
  default: "Author Name"
  help: "Name of the main author/maintainer"

image_user:
  type: str
  default: "frappe"
  help: "User name used inside the Docker image"

image_group:
  type: str
  default: "frappe"
  help: "Group name used inside the Docker image"

site_name:
  type: str
  default: "{{ app_name }}.local"
  help: "Default domain name used by the devcontainer site"

_tasks:
  - "python3 \"{{ _copier_conf.src_path }}/scripts/patch_commands_init_py.py\" {{ app_name }}"
  - "python3 \"{{ _copier_conf.src_path }}/scripts/update_feature_skips.py\" \"{{ _copier_conf.dst_path }}\" \"{{ _copier_conf.src_path }}/copier_features.yml\""

_skip_if_exists:
  - "{{ app_name }}/commands/__init__.py"
  - "ops/env/.env.template"

feature_devcontainer:
  type: bool
  default: true
  help: "Enable devcontainer support?"

feature_image_creation:
  type: bool
  default: true
  help: "Enable image creation support?"

feature_mkdocs:
  type: bool
  default: true
  when: "{{ feature_image_creation is true }}"
  help: "Enable mkdocs generation support?"

# feature_image_ops:
#   type: bool
#   default: true
#   when: "{{ feature_image_creation is true }}"
#   help: "Enable image operations support (e.g. makefile, compose files)?"

# feature_ci_gh_changelog:
#   type: bool
#   default: false
#   when: "{{ feature_image_creation and feature_image_ops is true }}"
#   help: "Enable github CI/CD changelog generation"

_exclude:
  - .git/
  - .gitignore
  - .gitattributes
  - .github/
  - /scripts
  - tests/
  - README.md
  - LICENSE
  - copier.yaml
  - copier_features.yml
